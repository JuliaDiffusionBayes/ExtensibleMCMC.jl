<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Internal structure · ExtensibleMCMC.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">ExtensibleMCMC.jl</span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../get_started/basic_use/">Get started</a></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox" checked/><label class="tocitem" for="menuitem-3"><span class="docs-label">User manual</span><i class="docs-chevron"></i></label><ul class="collapsed"><li class="is-active"><a class="tocitem" href>Internal structure</a><ul class="internal"><li><a class="tocitem" href="#Inputs-1"><span>Inputs</span></a></li><li><a class="tocitem" href="#Initialization-1"><span>Initialization</span></a></li><li><a class="tocitem" href="#The-algorithm-1"><span>The algorithm</span></a></li></ul></li><li><a class="tocitem" href="../updates_and_decorators/">Updates &amp; Decorators</a></li><li><a class="tocitem" href="../callbacks/">Callbacks</a></li><li><a class="tocitem" href="../priors/">Priors</a></li><li><a class="tocitem" href="../workspaces/">Workspaces</a></li><li><a class="tocitem" href="../mcmc_schedule/">MCMC Schedule</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox"/><label class="tocitem" for="menuitem-4"><span class="docs-label">How to...</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../how_to_guides/first_how_to/">(TODO) First how to</a></li><li><a class="tocitem" href="../../how_to_guides/define_my_own_workspace/">(TODO) Definy my own workspace</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5" type="checkbox"/><label class="tocitem" for="menuitem-5"><span class="docs-label">Tutorials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../tutorials/mean_of_bivariate_gaussian/">Estimate mean of a bivariate Gaussian</a></li></ul></li><li><a class="tocitem" href="../../module_index/">Index</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">User manual</a></li><li class="is-active"><a href>Internal structure</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Internal structure</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaDiffusionBayes/ExtensibleMCMC.jl/blob/master/docs/src/manual/internal_structure.md#L" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="manual_start-1"><a class="docs-heading-anchor" href="#manual_start-1">Understanding the internal components of the sampler</a><a class="docs-heading-anchor-permalink" href="#manual_start-1" title="Permalink"></a></h1><p>It is important to understand the main principles behind the underlying algorithm, as they shed light on understanding the individual components. Once you understand the big picture it should also be easier to write your own extensions.</p><p>The structure of the algorithm can be summarized with the following graph which we will break down below:</p><p><img src="../../assets/workflow.svg" alt="internal structure"/></p><h2 id="Inputs-1"><a class="docs-heading-anchor" href="#Inputs-1">Inputs</a><a class="docs-heading-anchor-permalink" href="#Inputs-1" title="Permalink"></a></h2><p>The inputs to the algorithm are of three types.</p><h3 id="MCMC-1"><a class="docs-heading-anchor" href="#MCMC-1">MCMC</a><a class="docs-heading-anchor-permalink" href="#MCMC-1" title="Permalink"></a></h3><p>The MCMC object is simply a list of <code>update</code>s and a specification of a <code>backend</code>. At each MCMC iteration the sampler will cycle through the list of these <code>update</code>s and perform each of them consecutively, as depicted in the red box in <code>The Algorithm</code> (subject to some modifications, TODO see advanced use). This list is <em>de facto</em> how you point to a specific MCMC algorithm and ask the sampler to use it. The last, optional argument <code>backend</code> is a way to use your own <code>Workspace</code>s. If default <code>backend</code> is used, then also default <code>Workspace</code>s will be created at the <code>Initialization</code> step.</p><h3 id="Callbacks-1"><a class="docs-heading-anchor" href="#Callbacks-1">Callbacks</a><a class="docs-heading-anchor-permalink" href="#Callbacks-1" title="Permalink"></a></h3><p>Callbacks are instructions that allow for certain interactions with the state of the sampler while the sampler is still working. In <code>The Algorithm</code> section of a graph you can see that each callback may be executed before and after any call to an MCMC update. These can be such instructions as:</p><ul><li>print useful info to the console about the state of the sampler</li><li>update diagnostic plots</li><li>save the data to a csv file</li></ul><h3 id="Other-1"><a class="docs-heading-anchor" href="#Other-1">Other</a><a class="docs-heading-anchor-permalink" href="#Other-1" title="Permalink"></a></h3><p>These are some prerequisites for running an MCMC sampler, such as:</p><ul><li>the data</li><li>specification of the number of MCMC iterations</li><li>initial guess of a parameter</li></ul><p>As well as some additional named options (<code>kwargs...</code>) that will be passed down to various initializers and that may be used by your own Workspaces etc.</p><h2 id="Initialization-1"><a class="docs-heading-anchor" href="#Initialization-1">Initialization</a><a class="docs-heading-anchor-permalink" href="#Initialization-1" title="Permalink"></a></h2><p>At the time of initialization of the sampler the global, <strong>and then</strong>, local workspaces are created. The concept of workspaces is central to ExtensibleMCMC and it is the reason why the package can be efficient even for very computationally intensive problems. The workspaces are essentially pre-allocated pieces of memory needed by the MCMC sampler. Consequently, if implemented correctly, the bottleneck of the algorithm should lie in computations and not memory-allocations.</p><div class="admonition is-success"><header class="admonition-header">Tip</header><div class="admonition-body"><p>Often times local workspaces are best conceptualized as a window view of some substate of the global workspace. The global workspace is initialized before local workspaces and is passed to the initializers of local workspaces. Consequently, it is often reasonable to define certain fields of the local workspaces as <code>view</code>s to the relevant fields of the global workspace.</p></div></div><p>After workspaces, the <code>MCMCSchedule</code> is initialized. It is an iterator that iterates through the MCMC steps and at each step iterates through <code>update</code>s to perform. In the simplest setting it takes a form of a simple double for loop as illustrated in <code>The Algorithm</code>, but it can be modified.</p><p>Finally, each of the callback is given a chance to perform some initializations.</p><h2 id="The-algorithm-1"><a class="docs-heading-anchor" href="#The-algorithm-1">The algorithm</a><a class="docs-heading-anchor-permalink" href="#The-algorithm-1" title="Permalink"></a></h2><p>In principle, there is nothing explicit about <code>The Algorithm</code> being a representation of an <code>MCMC</code> algorithm. It becomes one implicitly, by the virtue of <code>update</code>s being of the MCMC type.</p><p>The important part is marked in red. It represents a single MCMC update and illustrates that each update sees the corresponding pair of <code>update</code> and its local <code>workspace</code> as well global <code>workspace</code> and performs updates based on instructions in <code>update</code> and using pieces of memory that are in a local and the global <code>workspace</code>.</p><p>Additionally, notice that prior to each call to mcmc update there is an update call that allows for some exchange of information between the local and global workspaces.</p><p>See further sections of this manual to learn more about various components of the algorithm&#39;s flow above.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../get_started/basic_use/">« Get started</a><a class="docs-footer-nextpage" href="../updates_and_decorators/">Updates &amp; Decorators »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Thursday 7 May 2020 16:24">Thursday 7 May 2020</span>. Using Julia version 1.4.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
